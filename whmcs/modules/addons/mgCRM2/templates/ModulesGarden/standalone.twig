<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js" data-ng-app="mgCRMapp"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js" data-ng-app="mgCRMapp"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" data-ng-app="mgCRMapp">
<!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
  <head>
    <meta charset="UTF-8">
    <title data-ng-bind="page.title"></title>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- <meta content="width=device-width, initial-scale=1" name="viewport"/> -->
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>

            <!-- START GLOBALS -->
                
{#                <link href="{{ settings.templates.whmcsDir }}assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">#}

                <!-- Header External Includes-->
                {# font! #}
                <link href="{{ settings.url_scheme }}://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css"/>
                {# fucking awesome icons #}
                <link href="{{ settings.templates.rootDir }}/assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
                <link href="{{ settings.templates.rootDir }}/assets/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />

                <!-- Header Include Libs -->
                <link href="{{ settings.templates.rootDir }}/assets/plugins/jquery-ui/css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
                <link href="{{ settings.templates.whmcsDir }}assets/css/selectize.bootstrap3.css" rel="stylesheet" type="text/css">
                <link href="{{ settings.templates.rootDir }}/assets/plugins/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css" />

                <link href="{{ settings.templates.rootDir }}/assets/plugins/angular-ui-tree-master/dist/angular-ui-tree.css" rel="stylesheet" type="text/css" />
                <link href="{{ settings.templates.rootDir }}/assets/plugins/angularjs/ng-dialog/css/ngDialog.min.css" rel="stylesheet" type="text/css" />
                <link href="{{ settings.templates.rootDir }}/assets/plugins/angularjs/ng-dialog/css/ngDialog-theme-default.min.css" rel="stylesheet" type="text/css" />
                <link href="{{ settings.templates.rootDir }}/assets/plugins/angularjs/angular-xeditable/css/xeditable.css" rel="stylesheet" type="text/css" />
                <link href="{{ settings.templates.rootDir }}/assets/plugins/angularjs/block-ui/angular-block-ui.css" rel="stylesheet" type="text/css" />
                <link href="{{ settings.templates.rootDir }}/assets/plugins/angularjs/ui-select/dist/select.css" rel="stylesheet" type="text/css" />
                <link href="{{ settings.templates.rootDir }}/assets/plugins/angularjs/textAngular/dist/textAngular.css" rel="stylesheet" type="text/css" />
                <link href="{{ settings.templates.rootDir }}/assets/plugins/angularjs/angular-bootstrap-calendar/dist/css/angular-bootstrap-calendar.min.css" rel="stylesheet" type="text/css" />
                <link href="{{ settings.templates.rootDir }}/assets/plugins/angular-moment-picker/dist/angular-moment-picker.min.css" rel="stylesheet">

            <!-- END GLOBALS -->

            <!-- START DYMANICLY LOADED CSS FILES -->
            <!-- here is a place where angular will put css/js files needed to load dynamically NEEDS TO BE AFTER GLOBALS -->
            <link id="ng_load_plugins_before" />
            <!-- END DYMANICLY LOADED CSS FILES -->


            <!-- Header Include General Style -->
            <link href="{{ settings.templates.rootDir }}/assets/css/global-components.css" rel="stylesheet" type="text/css" />
            <!-- Header Include Layout specific colors theme  -->
            <link href="{{ settings.templates.rootDir }}/assets/css/layout.css" rel="stylesheet" type="text/css" />
            {# <link href="{{ settings.templates.rootDir }}/assets/css/default.css" rel="stylesheet" type="text/css" /> #}
            <!-- Header Include Layout plugins custom styles -->
            <link href="{{ settings.templates.rootDir }}/assets/css/plugins.css" rel="stylesheet" type="text/css" />
            <!-- CUSTOM DEFINED !? just for module purpose -->
            <link href="{{ settings.templates.rootDir }}/assets/css/custom.css" rel="stylesheet" type="text/css" />
            <!-- possible to mergo above -->

            <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
            <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
            <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
                <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
            <![endif]-->

            <!-- CSS DIRECTIVES TO PUT IMAGES URL ETC -->


            <!-- Header Include General Style -->
            <link href="{{ settings.templates.rootDir }}/assets/css/global-components.css" rel="stylesheet" type="text/css" />
            <!-- Header Include Layout specific colors theme  -->
            <link href="{{ settings.templates.rootDir }}/assets/css/layout.css" rel="stylesheet" type="text/css" />
            <link href="{{ settings.templates.rootDir }}/assets/css/default.css" rel="stylesheet" type="text/css" />
            <!-- Header Include Layout plugins custom styles -->
            <link href="{{ settings.templates.rootDir }}/assets/css/plugins.css" rel="stylesheet" type="text/css" />
            <!-- CUSTOM DEFINED !? just for module purpose -->
            <link href="{{ settings.templates.rootDir }}/assets/css/custom.css" rel="stylesheet" type="text/css" />
            <!-- possible to mergo above -->

            <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
            <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
            <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
                <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
            <![endif]-->

            <!-- site icon -->
            <link rel="shortcut icon" href="{{ settings.templates.rootDir }}/assets/img/favicon.png"/>

            <style>
                .mg-wrapper .mg-loader,
                .mg-wrapper .mg-loader-img {
                    background: url({{ settings.templates.rootDir }}/assets/img/mg-loader.gif);
                }
                .mg-wrapper .mg-loader-flow {
                    background: url({{ settings.templates.rootDir }}/assets/img/mg-loader-flow.png);
                }
            </style>
        
  </head>

  <!-- START BODY -->
  <!-- <body class="skin-blue sidebar-mini"> -->
  <body  style="margin: 0;">
      
  <!-- dont forget "mg-wrapper" ! -->
    <div ng-controller="AppController" class="full-screen-module-container mg-wrapper body" data-target=".body" data-spy="scroll" data-twttr-rendered="true">
            



            <!-- PAGE SPINNER will be here -->

            <!-- END PAGE SPINNER -->

            <!-- BEGIN HEADER -->
            <div class="page-header">
               {% include 'partials/header.twig' %}
            </div>
            <!-- END HEADER -->

            <div class="clearfix">
            </div>

            <!-- BEGIN CONTAINER -->
            <div class="page-container">

                <!-- BEGIN PAGE HEAD -->
                <!-- <div {* data-ng-include="'modsubpage/head.html'" data-ng-controller="PageHeadController" *} class="page-head"> -->
    {#            <div class="page-head">#}
                    {# {% include 'partials/head.twig' %} #}
    {#            </div>#}
                <!-- END PAGE HEAD -->

                <!-- BEGIN PAGE CONTENT -->
                <!-- usable with class: container-fluid -->
                <div class="page-content" ng-controller="ContentController">

                    <!-- BEGIN PAGE SPINNER -->
                    <div ng-spinner-bar class="page-mg-loadingbar">
                        <div class="mg-loader"></div>
                    </div>
                    <!-- END PAGE SPINNER -->
                    <!-- BEGIN FOLLOW UPS ALARM -->
                    <div ng-controller="FollowUpsActiveAlarmController">
                        <div class="box-followups-alarm" ng-style="{'display': showDisplay }">
                            <div ng-repeat="item in followupList" class="followups-alarm">
                                <div style="display: inline-block; margin-right: 5px;">
                                    <div class="title">
                                        <h4>
                                            <strong>
                                                <span ng-bind-html="item.resource.email" style="margin-right: 10px;"></span>
                                            </strong>
                                            <span class="label ng-binding" ng-style="{'background-color': item.type.color }" ng-bind-html="item.type.name"></span>
                                        </h4>
                                    </div>
                                    <div class="context">
                                        <strong>{{ lang.translate( 'followups.alarm.date.label' ) }}</strong><span ng-bind-html="item.date" style="margin-left: 10px;"></span>
                                        <br>
                                        <strong>{{ lang.translate( 'followups.alarm.description.label' ) }}</strong><span ng-bind-html="item.description" style="margin-left: 10px;"></span>
                                    </div>
                                </div>
                                <button type="button" class="close" style="display: inline-block;" ng-class="'button-close-alarm-' + item.id" ng-click="close($event,$index)">
                                    <span aria-hidden="true">×</span>
                                    <span class="sr-only">Close</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- END FOLLOW UPS ALARM -->

                    <div class="container-fluid fade-in-up">

                        {# BEGIN GLOBAL CONTENT DIRECTIVES #}
                        <div class="clearfix"></div>
                        <div class="container-fluid raw">
                            {# BREADCRUMBS DIRECTIVES #}
                            <ui-breadcrumbs displayname-property="data.pageTitle" abstract-proxy-property="data.proxy" class="pull-left"></ui-breadcrumbs>
                            {# SMART NOTIFCATIONS INDICATOR #}
                            <loading-notification></loading-notification>
                            <acl-no-access-notification></acl-no-access-notification>
                        </div>
                        <div ng-controller="NotificationsController">
                            <div class="row-fluid ng-hide" ng-show="showNotifications" style="display:none;" ng-style="{'display': (showNotifications) ? 'block':'none'}">
                                <div class="box light margin-bottom-10" ng-class="{'toogled': hiddenBox }">
                                    <div class="box-title">
                                        <div class="caption">
                                            <span class="font-red-thunderbird uppercase pull-left" ng-bind-html=" ( notifications.length > 1 ? 'notifications.main.widget.many' : 'notifications.main.widget.single') | translate:{ num: notifications.length }"></span>
                                        </div>
                                        <div class="actions">
                                            <a href="#" ng-show="hiddenBox" ng-click="hiddenBox=!hiddenBox" class="btn btn-sm btn-danger btn-circle btn-outline btn-inverse btn-transparent btn-icon-only">
                                                <i class="fa fa-expand"></i>
                                            </a>
                                            <a href="#" ng-hide="hiddenBox" ng-click="hiddenBox=!hiddenBox" class="btn btn-sm btn-danger btn-circle btn-outline btn-inverse btn-transparent btn-icon-only">
                                                <i class="fa fa-compress"></i>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="box-body notifications">
                                       <div class="note padding-right-15" ng-class="n.class" ng-repeat="n in notifications">
                                            <span ng-show="n.accepted_at && n.confirmation" class="text-muted small pull-right">{{ '{{' }} ::('notifications.main.accepted' | translate) {{ '}}' }} {{ '{{' }} n.accepted_at {{ '}}' }}</span>
                                            <p ng-bind-html="n.content"  style="margin-bottom:0;"></p>
                                            <button ng-show="n.confirmation && !n.accepted_at" style="margin-top:10px;" ng-click="acceptNote(n.id)" class="btn btn-sm btn-success btn-inverse">{{ '{{' }} ::('notifications.main.btn.accept' | translate) {{ '}}' }}</button>
                                       </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {# END ACTUAL CONTENT #}

                        {# BEGIN ACTUAL CONTENT #}
                        <div ui-view>
                        </div>
                        {# END ACTUAL CONTENT #}

                    </div>
                </div>
                <!-- END PAGE CONTENT -->


                <!-- BEGIN FOOTER -->
                <div class="page-footer">
                    <div class="container">
                        {{ lang.translate( 'CRM' ) }} - {{ lang.translate( 'Customer Relationship Manager' ) }}. &copy; <a href="http://www.modulesgarden.com" class="mgBanner" target="_blank">ModulesGarden</a>
                    </div>
                </div>
                <div class="scroll-to-top">
                    <i class="icon-arrow-up"></i>
                </div>
                <!-- END FOOTER -->

            </div>
            <!-- END CONTAINER -->

            <!-- BEGIN CORE JQUERY PLUGINS -->
            <!--[if lt IE 9]>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/respond.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/excanvas.min.js"></script>
            <![endif]-->

            <!-- JQUERY -->
{#            <script src="{{ settings.templates.rootDir }}/assets/plugins/jquery/jquery-1.11.2.min.js" type="text/javascript"></script>#}
            <script src="{{ settings.templates.rootDir }}/assets/plugins/jquery/jquery-2.1.4.min.js" type="text/javascript"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/jquery-ui/js/jquery-ui.min.js" type="text/javascript"></script>
                
            <!-- CORE JQUERY PLUGINS -->
            <script src="{{ settings.templates.rootDir }}/assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/jquery-blockui/jquery.blockui.min.js" type="text/javascript"></script>
{#            <script src="{{ settings.templates.rootDir }}/assets/plugins/jquery-cokie/jquery.cokie.min.js" type="text/javascript"></script>#}
{#            <script src="{{ settings.templates.rootDir }}/assets/plugins/jquery-uniform/jquery.uniform.min.js" type="text/javascript"></script>#}
            <script src="{{ settings.templates.rootDir }}/assets/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
            <!-- END CORE JQUERY PLUGINS -->


            {# APLICATION #}
            <script src="{{ settings.templates.rootDir }}/app/app.mgCRM.js" type="text/javascript"></script>


            <!-- BEGIN CORE ANGULARJS PLUGINS -->
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/angular.js" type="text/javascript"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/angular-cookies.min.js" type="text/javascript"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/angular-sanitize.js" type="text/javascript"></script> 
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/angular-animate.min.js" type="text/javascript"></script> 
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/ui-router/angular-ui-router.min.js" type="text/javascript"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/angular-resource.js" type="text/javascript"></script> 
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/ocLazyLoad/dist/ocLazyLoad.min.js" type="text/javascript"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/angular-translate/angular-translate.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/ui-bootstrap/ui-bootstrap-tpls-0.13.4.min.js" type="text/javascript"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/ui.bootstrap.datetimepicker/dist/datetime-picker.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/ng-dialog/js/ngDialog.min.js" type="text/javascript"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/angular-xeditable/js/xeditable.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/block-ui/angular-block-ui.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/ui-sortable/sortable.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/ui-select/dist/select.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/Smart-Table/dist/smart-table.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/textAngular/dist/textAngular-rangy.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/textAngular/dist/textAngular-sanitize.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/textAngular/dist/textAngular.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/moment/moment.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angular-bootstrap-multiselect-master/dist/angular-bootstrap-multiselect.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angular-moment-picker/dist/angular-moment-picker.min.js"></script>
            <script src="{{ settings.templates.rootDir }}/assets/plugins/angular-ui-tree-master/dist/angular-ui-tree.min.js" type="text/javascript" ></script>
{#            <script src="{{ settings.templates.rootDir }}/assets/plugins/angularjs/angular-bootstrap-calendar/dist/js/angular-bootstrap-calendar-tpls.min.js"></script>#}
            <!-- END CORE ANGULARJS PLUGINS -->

            <!-- BEGIN APP LEVEL ANGULARJS SCRIPTS -->
            <!-- load CRM module for angular -->
            <script src="{{ settings.templates.rootDir }}/app/app.module.CRM.js" type="text/javascript"></script> 
                {# In this way we can push twig wariables directly to angular script initializations #}
                {% autoescape false %}
                    {% include 'app/app.angular.js.twig' %}
                {% endautoescape %}
            <!-- END APP LEVEL ANGULARJS SCRIPTS -->

            <script type="text/javascript">
            {% autoescape false %}

                // maybe will be usefull string escape
                function jqescape(str) { return str.replace(/[#;&,\.\+\*~':"!\^\$\[\]\(\)=>|\/\\]/g, '\\$&'); }

                // init JavaScript app
                $(document).ready(function() 
                {
                    // js template wrapper for some nesesary actions
                    // related only with template, nothing more
                    mgCRM.init(true);
                });

            {% endautoescape %}
            </script>
            <!-- END JAVASCRIPTS -->

            <!-- ASTERISK WIDGET TO CALL -->
            {% if settings.templates.integrations.asterisk %}
                {% include 'partials/asteriskjs.twig' %}
            {% endif %}

        </div><!-- END main angular app wrapper -->



  </body>
</html>