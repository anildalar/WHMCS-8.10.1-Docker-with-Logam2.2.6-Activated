!function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./../",i(i.s=1)}([,function(t,e,i){"use strict";function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.r(e);var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.button=e,this.container=this.button.closest("[data-kb-category-item]"),this.iconInput=this.container.find("[data-kb-category-item-icon-value]"),this.predefinedIconInput=this.container.find("[data-kb-category-item-predefined-icon-value]"),this.mediaInput=this.container.find("[data-kb-category-item-media-value]"),this.modal=$("[data-modal-menu-icon]"),this.submit=this.modal.find("[data-modal-menu-icon-submit]"),this.bindEvents()}var e,i,n;return e=t,(i=[{key:"bindEvents",value:function(){$(this.button).on("click",this.setValues.bind(this))}},{key:"setValues",value:function(){console.log(this.container);var t,e,i,a,n,o,s=this.iconInput[0].value,d=this.predefinedIconInput[0].value,c=this.mediaInput[0].value,r=this.container[0].attributes["data-index"].value;if((""!=s||""!=d||""!=c)&&(""!=s?t=s:""!=d?t=d:""!=c&&(t=c),(e=this.modal.find('input[value="'+t+'"]')).length)){a=(i=e.closest(".tab-pane"))[0].id,n=this.modal.find('.nav__link[href="#'+a+'"]'),o=i.find("[data-media-list]"),n.closest(".nav--tabs").find(".is-active")[0].classList.remove("is-active"),n[0].closest(".nav__item").classList.add("is-active"),i.closest(".tab-content").find(".tab-pane.is-active")[0].classList.remove("is-active"),i[0].classList.add("is-active"),e[0].checked=!0;var l=$(e).closest("label")[0].offsetTop-o[0].offsetTop-64;$(o).scrollTop(l)}this.submit[0].attributes["data-index"].value=r}}])&&a(e.prototype,i),n&&a(e,n),t}();function o(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modal=$("[data-modal-menu-icon]"),this.submit=$("[data-modal-menu-icon-submit]"),this.iconInput=this.modal.find('input[name="item[icon]"]'),this.predefinedIconInput=this.modal.find('input[name="item[predefined_icon]"]'),this.mediaInput=this.modal.find('input[name="item[media]"]'),this.bindEvents()}var e,i,a;return e=t,(i=[{key:"bindEvents",value:function(){$(this.submit).on("click",this.getValue.bind(this)),$(this.iconInput).on("change",this.uncheckType.bind(this)),$(this.predefinedIconInput).on("change",this.uncheckType.bind(this)),$(this.mediaInput).on("change",this.uncheckType.bind(this))}},{key:"uncheckType",value:function(t){"item[icon]"==t.target.name?(this.predefinedIconInput.each((function(){$(this)[0].checked=!1})),this.mediaInput.each((function(){$(this)[0].checked=!1}))):"item[predefined_icon]"==t.target.name?(this.iconInput.each((function(){$(this)[0].checked=!1})),this.mediaInput.each((function(){$(this)[0].checked=!1}))):"item[media]"==t.target.name&&(this.iconInput.each((function(){$(this)[0].checked=!1})),this.predefinedIconInput.each((function(){$(this)[0].checked=!1})))}},{key:"getValue",value:function(){var t=this,e=!1,i=!1,a=!1,n=this.modal.find("[data-media-custom-input]");this.iconInput.each((function(){!0===$(this)[0].checked&&(t.changeIcon($(this)),e=!0)})),e||this.predefinedIconInput.each((function(){!0===$(this)[0].checked&&(t.changeIcon($(this),!0),i=!0)})),e||i||this.mediaInput.each((function(){!0===$(this)[0].checked&&(t.changeIcon($(this),!1,!0),a=!0)})),e||i||a||""==n[0].value||this.setCustomMedia(n)}},{key:"changeIcon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.submit[0].attributes["data-index"].value,n=t[0].value,o=$('[data-kb-category-item][data-index="'+a+'"]'),s=o[0].attributes["data-assets-url"].value,d=o.find("[data-kb-category-item-icon]"),c=o.find("[data-kb-category-item-predefined-icon]"),r=o.find("[data-kb-category-item-media]"),l=o.find("[data-kb-category-item-icon-value]"),u=o.find("[data-kb-category-item-predefined-icon-value]"),m=o.find("[data-kb-category-item-media-value]"),h=t.closest("[data-media-list]"),f=this.modal.find("[data-media-search]"),b=o.find("[data-kb-category-item-icon-new]"),v=o.find("[data-kb-category-item-icon-content]");if(e||i)if(i){l[0].value="",d[0].className="is-hidden",u[0].value="",c[0].innerHTML="",c[0].className="is-hidden",m[0].value=n,r[0].className="",r[0].innerHTML="";var p='<img src="'.concat(s,"/img/page-manager/").concat(n,'" />');r.append(p)}else/.tpl/i.test(n)?c.load(s+"/svg-icon/"+n):c.load(s+"/svg-icon/"+n+".tpl"),u[0].value=n,c[0].className="",l[0].value="",d[0].className="is-hidden",m[0].value="",r[0].innerHTML="",r[0].className="is-hidden";else d[0].className=n,l[0].value=n,m[0].value="",r[0].innerHTML="",r[0].className="is-hidden",u[0].value="",c[0].innerHTML="",c[0].className="is-hidden";b[0].classList.add("is-hidden"),v[0].classList.remove("is-hidden"),f.each((function(){$(this)[0].value="",$(this).trigger("input")})),t[0].checked=!1,this.modal.modal("hide"),$(h).scrollTop(0)}},{key:"setCustomMedia",value:function(t){var e=t[0].attributes["data-ajax-url"].value,i=t.closest("form"),a=this;$.ajax({type:"POST",url:e,data:new FormData(i[0]),contentType:!1,cache:!1,processData:!1,success:function(e){var i=JSON.parse(e);i.upload&&a.addNewImage(t,i)}})}},{key:"addNewImage",value:function(t,e){var i=t[0].attributes["data-assets-url"].value,a='\n            <label class="media__item media__item--lg col-md-3">\n                <div class="media__item-content">\n                    <div class="media__item-icon">\n                        <img src="'.concat(i,"/img/page-manager/").concat(e.seoImage,'" alt="').concat(e.seoImage,'">\n                    </div>\n                    <input class="media__item-input media-icon" type="radio" name="item[media]" checked value="').concat(e.seoImage,'">\n                    <span class="media__item-border"></span>\n                    <span class="media__item-label"></span>\n                    <div class="media__item-footer p-0x p-l-2x">\n                        <span class="media__item-filename truncate">').concat(e.seoImage,"</span>\n                    </div>\n                </div>\n            </label>"),n=t.closest("[data-media-custom]"),o=n.find("[data-media-custom-btn]"),s=n.find("[data-media-image-container]"),d=t.closest(".tab-content").find("[data-media-manager]"),c=d.find('input[value="'+e.seoImage+'"]');o[0].classList.remove("is-hidden"),s[0].classList.add("is-hidden"),n[0].classList.remove("media--item-added"),c.length||d.append(a);var r=this.submit[0].attributes["data-index"].value,l=e.seoImage,u=$('[data-kb-category-item][data-index="'+r+'"]'),m=u.find("[data-kb-category-item-icon]"),h=u.find("[data-kb-category-item-predefined-icon]"),f=u.find("[data-kb-category-item-media]"),b=u.find("[data-kb-category-item-icon-value]"),v=u.find("[data-kb-category-item-predefined-icon-value]"),p=u.find("[data-kb-category-item-media-value]"),g=this.modal.find("[data-media-search]"),y=u.find("[data-kb-category-item-icon-new]"),k=u.find("[data-kb-category-item-icon-content]");b[0].value="",m[0].className="is-hidden",v[0].value="",h[0].innerHTML="",h[0].className="is-hidden",p[0].value=l,f[0].className="",f[0].innerHTML="";var I='<img src="'.concat(i,"/img/page-manager/").concat(e.seoImage,'" alt="').concat(e.seoImage,'">');f.append(I),y[0].classList.add("is-hidden"),k[0].classList.remove("is-hidden"),g.each((function(){$(this)[0].value="",$(this).trigger("input")})),this.modal.modal("hide")}}])&&o(e.prototype,i),a&&o(e,a),t}();function d(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.button=e,this.modal=$("[data-delete-kbicon-modal]"),this.modalSubmit=this.modal.find("[data-delete-kbicon-modal-submit]"),this.bindEvents()}var e,i,a;return e=t,(i=[{key:"bindEvents",value:function(){$(this.button).on("click",this.removeItem.bind(this))}},{key:"removeItem",value:function(t){var e=$(t.currentTarget).closest("[data-kb-category-item]")[0].attributes["data-index"].value;this.modalSubmit[0].attributes["data-index"].value=e}}])&&d(e.prototype,i),a&&d(e,a),t}();function r(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.button=e,this.bindEvents()}var e,i,a;return e=t,(i=[{key:"bindEvents",value:function(){$(this.button).on("click",this.addNewItem.bind(this))}},{key:"addNewItem",value:function(){var t=this.button[0].attributes["data-index"].value,e=this.button[0].attributes["data-assets-url"].value,i='\n            <div \n                class="kb-category-item media media--field media--sm" \n                data-kb-category-item\n                data-index="'.concat(t,'"                                 \n                data-assets-url="').concat(e,'"\n            >\n                <input type="hidden" name="kbcategory[id][]" value="">\n                <div class="media__content" >\n                    <a \n                        class="media__upload" \n                        data-toggle="lu-modal" \n                        data-target="#menuIconModal"\n                        data-kb-category-item-icon-button\n                        data-kb-category-item-icon-new\n                        href="#"\n                    >\n                        <div class="media__upload-content">\n                            <i class="media__icon ls ls-upload"></i>\n                            <strong class="media__title p-md">Click to choose icon</strong>\n                        </div>\n                    </a>\n                    <div class="media__body is-hidden" data-kb-category-item-icon-content>\n                        <i class="is-hidden" data-kb-category-item-icon></i>\n                        <div class="media__predefined-icon" data-kb-category-item-predefined-icon>\n                            \n                        </div>\n                        <div class="media__predefined-media" data-kb-category-item-media>\n                            \n                        </div>\n                        <input type="hidden" name="kbcategory[icon][]" value="" data-kb-category-item-icon-value>\n                        <input type="hidden" name="kbcategory[predefined_icon][]" value="" data-kb-category-item-predefined-icon-value>\n                        <input type="hidden" name="kbcategory[media][]" data-kb-category-item-media-value>\n                    </div>\n                    <div class="media__footer">                                                                                        \n                        <span class="media__name" data-kb-category-item-icon-name>\n                            Cat Id: <input name="kbcategory[kbid][]" type="number" class="form-control form-control--xs" value="" data-kb-category-id>\n                        </span>\n                        <span class="btn btn--icon btn--link btn--xs" data-toggle="lu-modal" data-target="#menuIconModal" data-kb-category-item-icon-button>\n                            <i class="btn__icon lm lm-pen tooltip drop-target" data-toggle="lu-tooltip" data-title="Edit"></i>\n                        </span>\n                        <a class="btn btn--icon btn--link btn--xs" data-toggle="lu-modal" data-target="#deleteKnowledgebaseIconItem" data-kb-category-item-icon-remove>\n                            <i class="btn__icon lm lm-trash tooltip drop-target" data-toggle="lu-tooltip" data-title="Remove"></i>\n                        </a>\n                    </div>\n                </div>\n            </div>');$(i).insertBefore(this.button),this.button[0].attributes["data-index"].value=parseInt(t)+1;var a=$(".kb-category-row").find("[data-kb-category-item]").last();console.log(a);var o=a.find('[data-toggle="lu-tooltip"]'),s=a.find("[data-kb-category-item-icon-button]"),d=a.find("[data-kb-category-item-icon-remove]");$(o).each((function(){$(this).luTooltip()})),$(s).each((function(){new n($(this))})),$(d).each((function(){new c($(this))}))}}])&&r(e.prototype,i),a&&r(e,a),t}();function u(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modal=$("[data-delete-kbicon-modal]"),this.button=this.modal.find("[data-delete-kbicon-modal-submit]"),this.list=$("[data-kb-categories]"),this.bindEvents()}var e,i,a;return e=t,(i=[{key:"bindEvents",value:function(){$(this.button).on("click",this.removeItemConfirm.bind(this))}},{key:"removeItemConfirm",value:function(t){var e=this.button[0].attributes["data-index"].value;this.list.find('[data-kb-category-item][data-index="'+e+'"]').remove(),this.modal.modal("hide")}}])&&u(e.prototype,i),a&&u(e,a),t}();function h(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var f="[data-media-search]",b="[data-media-list]",v="[data-media-item]",p="[data-media-no-data]",g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.input=this.container.find(f),this.list=this.container.find(b),this.item=this.container.find(v),this.noData=this.container.find(p),this.bindEvents(),this.timeout=null}var e,i,a;return e=t,(i=[{key:"bindEvents",value:function(){$(this.input).on("input",this.searchMedia.bind(this)),this.list.on("scroll",this.hideTooltipIcons.bind(this))}},{key:"searchMedia",value:function(){var t=this,e=this.input[0].value.toUpperCase();clearTimeout(this.timeout),this.timeout=setTimeout((function(){$(t.item).each((function(){$(this)[0].attributes["data-media-item"].value.toUpperCase().indexOf(e)>-1?$(this)[0].classList.remove("is-hidden"):$(this)[0].classList.add("is-hidden")})),t.toggleNoData()}),250)}},{key:"toggleNoData",value:function(){0===$(this.list).find(".media__item:visible").length?this.noData[0].classList.remove("is-hidden"):this.noData.length&&this.noData[0].classList.add("is-hidden")}},{key:"hideTooltipIcons",value:function(){$("body > .drop.tooltip").remove()}}])&&h(e.prototype,i),a&&h(e,a),t}();function y(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var k="[data-media-custom-btn]",I="[data-media-custom-input]",_="[data-media-image-container]",w="[data-media-image]",T="[data-media-image-filename]",x="[data-media-image-delete]",L=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.image=this.container.find(w),this.input=this.container.find(I),this.button=this.container.find(k),this.image_container=this.container.find(_),this.modal=this.container.closest(".modal"),this.filename=this.container.find(T),this.delete_btn=this.container.find(x),this.bindEvents()}var e,i,a;return e=t,(i=[{key:"bindEvents",value:function(){$(this.input).on("change",this.changeImage.bind(this)),$(this.button).on("click",this.triggerInput.bind(this)),$(this.image_container).on("click",this.triggerInput.bind(this))}},{key:"triggerInput",value:function(t){$(this.input).click()}},{key:"changeImage",value:function(){var t=this.input[0].files,e=(this.input[0].name,this);if(t&&t[0]){var i=new FileReader;i.onload=function(i){e.container[0].classList.add("media--item-added"),e.image_container[0].classList.remove("is-hidden"),e.button[0].classList.add("is-hidden"),e.image[0].setAttribute("src",i.target.result),e.filename[0].textContent=t[0].name,$(e.modal).find(".modal__actions .btn.disabled").removeClass("disabled")},i.readAsDataURL(t[0]),this.modal.find(".media__item-input").each((function(){$(this)[0].checked=!1}))}}}])&&y(e.prototype,i),a&&y(e,a),t}();function E(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var N=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.item=e.find("[data-kb-category-item]"),this.setIcon=e.find("[data-kb-category-item-icon-button]"),this.addNewItem=e.find("[data-kb-category-item-new]"),this.removeItem=e.find("[data-kb-category-item-icon-remove]"),this.mediaSearch=$("body").find("[data-media-container]"),this.mediaCustom=$("body").find("[data-media-custom]"),this.bindEvents()}var e,i,a;return e=t,(i=[{key:"bindEvents",value:function(){this.loadKnowledgebaseIcons(this.container)}},{key:"loadKnowledgebaseIcons",value:function(){this.setIcon.each((function(){new n($(this))})),this.addNewItem.each((function(){new l($(this))})),this.removeItem.each((function(){new c($(this))})),this.mediaSearch.each((function(){new g($(this))})),this.mediaCustom.each((function(){new L($(this))})),new s,new m}}])&&E(e.prototype,i),a&&E(e,a),t}();var C={initDataSelectors:function(){var t=void 0;$("[data-kb-categories]").length&&(t=$("[data-kb-categories]")),void 0!==t&&new N(t)}};$(document).ready((function(){C.initDataSelectors()}))}]);